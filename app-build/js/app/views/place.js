define(["jquery","underscore","backbone","app/collections/places","app/collections/days","app/templates"],function(e,t,n,r,i,s){var o=n.View.extend({template:s.place,collection:new i([]),events:{"click #btn-remove":"removePlace","click #btn-expand":"openDetail"},initialize:function(){var e=this.template(this.model.toJSON());this.$el.html(e),this.$bodyEl=this.$(".panel-body")},render:function(){var e=this;return this.collection.url=["http://api.wunderground.com/api/","fdc7ef26aca78e26","/forecast/q/",this.model.get("countryCode"),"/",this.model.get("name"),".json"].join(""),this.collection.fetch({success:function(t,n,r){e.renderDays()},error:function(e,t,n){console.log("There was an error")}}),this},renderDays:function(){var e=[];this.collection.each(function(t,n,r){e.push(s.day(t.toJSON()))}),this.$bodyEl.html(e.join(""))},removePlace:function(e){this.model.destroy()},openDetail:function(e){this.$(".panel").toggleClass("detail")}});return o});